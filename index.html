<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyCareGorithm Sprint Analytics | Live Dashboard</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/chart.js" as="script">
    <link rel="preload" href="css/styles.css" as="style">
    <link rel="preload" href="js/dashboard.js" as="script">
    
    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js" defer></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Meta tags for performance -->
    <meta name="description" content="MyCareGorithm Sprint Analytics Dashboard - Real-time sprint performance tracking and business value analysis">
    <meta name="keywords" content="sprint analytics, agile, project management, performance tracking">
    <meta name="author" content="MyCareGorithm Development Team">
    
    <!-- Cache control -->
    <meta http-equiv="Cache-Control" content="public, max-age=3600">
</head>
<body>
    <div class="dashboard-container">
        <!-- Master Header -->
        <div class="master-header">
            <h1 class="master-title">Sprint Analytics Dashboard</h1>
            <div class="master-subtitle">MyCareGorithm Development Performance & Business Value Tracking</div>
            
            <!-- GitHub Pages Notice -->
            <div class="github-notice">
                <div class="github-notice-title">ðŸ“¡ Live Dashboard</div>
                <div class="github-notice-text">
                    This dashboard is hosted on GitHub Pages and updates when new sprint data is uploaded to the repository.
                </div>
            </div>
            
            <!-- Sprint Navigation Controls -->
            <div class="sprint-controls">
                <select id="sprintSelector" class="sprint-selector-main">
                    <option value="current">Select Sprint to View</option>
                    <option value="25Q309-S2">Sprint 25Q309-S2 (Current)</option>
                    <option value="25Q309-S1">Sprint 25Q309-S1 (Previous)</option>
                </select>
                
                <select id="metricViewSelector" class="sprint-selector-main">
                    <option value="hybrid">Pool-Based Metrics</option>
                    <option value="traditional">Traditional Velocity</option>
                </select>
                
                <button id="loadSprintBtn" class="control-btn">Load Sprint</button>
                <button id="refreshDataBtn" class="control-btn">Refresh Data</button>
            </div>
            
            <!-- Status Overview -->
            <div class="status-overview" id="statusOverview">
                <span class="status-badge badge-current" id="sprintNameBadge">Sprint 25Q309-S2 Active</span>
                <span class="status-badge badge-ready" id="completionBadge">0% Complete</span>
                <div class="status-selector-container">
                    <select id="sprintStatusSelector" class="status-selector">
                        <option value="planning">Planning Phase</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Main Dashboard Content -->
        <div class="dashboard-content" id="dashboardContent">
            <!-- Loading State -->
            <div class="loading" id="loadingState">
                <div class="spinner"></div>
                <div>Loading sprint data...</div>
            </div>

            <!-- Default Placeholder Content -->
            <div class="content-placeholder" id="placeholderContent">
                <div class="placeholder-icon">ðŸ“Š</div>
                <h2 class="placeholder-title">Sprint Analytics System</h2>
                <div class="placeholder-text">
                    <p>Select a sprint from the dropdown above to view comprehensive analytics with time savings tracking, team performance insights, and predictive analytics.</p>
                    <p>This dashboard automatically loads the latest sprint data from the GitHub repository.</p>
                </div>
            </div>

            <!-- Hybrid Metrics Section -->
            <div class="hybrid-metrics-section" id="hybridMetricsSection" style="display: none;">
                <h2>Pool-Based Development Metrics</h2>
                
                <!-- Ticket Completion Metrics -->
                <div class="metric-card">
                    <h3>Ticket Completion</h3>
                    <div class="metric-grid">
                        <div class="metric-item">
                            <span class="metric-value" id="ticketCompletionRate">26.4%</span>
                            <span class="metric-label">Completion Rate</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="completedTickets">23</span>
                            <span class="metric-label">Completed Tickets</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="totalTickets">87</span>
                            <span class="metric-label">Total Tickets</span>
                        </div>
                    </div>
                </div>

                <!-- Epic Progress Metrics -->
                <div class="metric-card">
                    <h3>Epic Progress</h3>
                    <div class="metric-grid">
                        <div class="metric-item">
                            <span class="metric-value" id="epicsCompleted">2</span>
                            <span class="metric-label">Epics Completed</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="epicsInProgress">6</span>
                            <span class="metric-label">Epics In Progress</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="averageEpicCompletion">45.2%</span>
                            <span class="metric-label">Avg Epic Completion</span>
                        </div>
                    </div>
                </div>

                <!-- Developer Contribution Metrics -->
                <div class="metric-card">
                    <h3>Developer Contribution</h3>
                    <div class="metric-grid">
                        <div class="metric-item">
                            <span class="metric-value" id="activeDevelopers">7</span>
                            <span class="metric-label">Active Developers</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="developerItems">35</span>
                            <span class="metric-label">Developer Items</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="avgItemsPerDev">7.0</span>
                            <span class="metric-label">Avg Items/Developer</span>
                        </div>
                    </div>
                </div>

                <!-- Workflow Efficiency -->
                <div class="metric-card">
                    <h3>Workflow Efficiency</h3>
                    <div class="metric-grid">
                        <div class="metric-item">
                            <span class="metric-value" id="flowEfficiency">68.5%</span>
                            <span class="metric-label">Flow Efficiency</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="bottleneckStatus">To Do</span>
                            <span class="metric-label">Primary Bottleneck</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="avgTimeInProgress">4.2</span>
                            <span class="metric-label">Avg Days in Progress</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dynamic Sprint Content (Loaded via JavaScript) -->
            <div id="sprintContent" style="display: none;">
                <!-- Sprint content will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <!-- Embedded Sprint Data (Minimal fallback) -->
    <script>
        // Minimal embedded data for offline fallback
        window.EMBEDDED_SPRINT_DATA = {
            '25Q309-S2': {
                config: { id: '25Q309-S2', name: 'Sprint 25Q309-S2', startDate: '2025-09-22', endDate: '2025-10-03', totalStoryPoints: 52 },
                metrics: { totalStoryPoints: 52, velocity: 31, completionRate: 59.6, successProbability: 85 },
                storyStatus: { carryOver: 7 },
                executiveSummary: {
                    securityCompliance: { title: "Security & Access Control", timeSavings: "60% reduction in role management time", storyPoints: 5, impact: "Server-enforced RBAC with comprehensive role management", achievements: ["Role hierarchy", "API protection", "Audit trail"] },
                    marketExpansion: { title: "Global Market Access", marketExpansion: "Spanish, French & Chinese markets", storyPoints: 4, impact: "End-to-end multilingual content", achievements: ["Language switcher", "Localized content", "i18n implementation"] },
                    operationalExcellence: { title: "DevOps & Infrastructure", efficiencyGain: "80% reduction in deployment time", storyPoints: 9, impact: "Docker containerization with automated CI/CD", achievements: ["Docker", "CI/CD pipeline", "Blue-green deployments"] },
                    technicalModernization: { title: "Platform Modernization", competitiveAdvantage: "TypeScript migration", storyPoints: 2, impact: "Technical debt reduction", achievements: ["TypeScript", "Modern patterns", "Zero downtime"] }
                },
                teamPerformance: {
                    'Brad Foley': { points: 6, items: 6, themes: ['Backend', 'API Development', 'Database'], role: 'developer' },
                    'Josh Rogers': { points: 5, items: 6, themes: ['DevOps', 'Infrastructure', 'CI/CD'], role: 'developer' },
                    'William Larsen': { points: 3, items: 4, themes: ['API Development', 'Swagger', 'Backend'], role: 'developer' },
                    'Apurva Kalvade': { points: 2, items: 3, themes: ['Multilingual', 'Frontend', 'Localization'], role: 'developer' },
                    'Karan Mehta': { points: 2, items: 2, themes: ['Mobile', 'App Development'], role: 'developer' },
                    'Himanshu Gupta': { points: 1, items: 1, themes: ['Backend', 'API'], role: 'developer' },
                    'Jenish Dabhi': { points: 1, items: 1, themes: ['Frontend', 'Multilingual'], role: 'developer' }
                },
                workHistory: {
                    'Renee Sardelli': { points: 8, items: 12, themes: ['DevOps', 'Infrastructure', 'Deployment'], role: 'qa_coordinator', contribution: 'completed' },
                    'Samantha Sutton': { points: 4, items: 5, themes: ['QA', 'Testing', 'Quality Assurance'], role: 'qa_analyst', contribution: 'completed' },
                    'Vaishnavi Chitara': { points: 1, items: 1, themes: ['Backend', 'Multilingual'], role: 'qa_analyst', contribution: 'completed' }
                },
                hybridMetrics: {
                    ticketCompletion: {
                        totalTickets: 87,
                        completedTickets: 23,
                        completionRate: 26.4,
                        ticketsInProgress: 12,
                        ticketsInUAT: 3,
                        ticketsInQA: 3,
                        ticketsBlocked: 1,
                        ticketsToDo: 39,
                        ticketsReadyForProd: 12
                    },
                    epicProgress: {
                        totalEpics: 8,
                        epicsInProgress: 6,
                        epicsCompleted: 2,
                        epicsBlocked: 0,
                        averageEpicCompletion: 45.2
                    },
                    workflowEfficiency: {
                        averageTimeInProgress: 4.2,
                        averageTimeInUAT: 2.1,
                        averageTimeInQA: 1.8,
                        bottleneckStatus: 'To Do',
                        flowEfficiency: 68.5
                    },
                    developerContribution: {
                        activeDevelopers: 7,
                        totalDeveloperItems: 35,
                        averageItemsPerDeveloper: 7.0,
                        developerVelocity: 18.5
                    }
                },
                chartData: {
                    statusDistribution: [20, 12, 3, 39, 3, 1, 12],
                    storyPointsByStatus: [31, 2, 13, 0, 1, 5],
                    carryoverStoryPoints: 7,
                    epicProgress: [5, 4, 4, 9, 5, 4, 2, 5],
                    epicCompletionRates: [20, 15, 10, 25, 30, 20, 5, 40],
                    forecastData: [31, 35, 40, 45, 52]
                },
                insights: {
                    criticalBlockers: "1 blocked item affecting deployment pipeline - manageable risk",
                    velocityGap: "2.6 pts/day vs 3.2 target (19% gap - on track for completion)",
                    successProbability: "85% chance of completing sprint objectives with current velocity",
                    valueTracking: "Sprint represents $266,570 potential value with strong execution momentum",
                    carryOverNote: "7 story carryovers imported from 25Q309-S1 - all progressing well",
                    teamPerformance: "Renee Sardelli leading with 12 items, strong DevOps focus across team"
                },
                carryOver: {
                    count: 7,
                    items: [
                        { issueKey: 'MV30-2213', summary: 'Swagger for API', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-700', summary: 'Case: Functionality: Add "Are you sure?" Modal', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-1914', summary: 'Case: ALL: Next Steps: Update Next Steps pages', status: 'Quality Assurance (IN TEST)', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2215', summary: 'App Log in page', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2204', summary: 'Handle multilingual images and icons', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2203', summary: 'Convert static text to multilingual', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2234', summary: 'Front-end Optimizations', status: 'Ready for Prod', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' }
                    ]
                }
            },
            '25Q309-S1': {
                config: { id: '25Q309-S1', name: 'Sprint 25Q309-S1', startDate: '2025-09-02', endDate: '2025-09-15', totalStoryPoints: 98 },
                metrics: { totalStoryPoints: 98, velocity: 38, completionRate: 37.3, successProbability: 85 },
                storyStatus: { done: 7, carryOver: 7 },
                executiveSummary: {
                    clinicalWorkflow: { title: "Enhanced Clinical Workflow", timeSavings: "15-20 minutes per case", storyPoints: 35, impact: "Reduced clinical documentation time", achievements: ["19 Features Completed", "2 Critical Blockers Identified"] },
                    mobilePlatform: { title: "Mobile Platform Foundation", marketExpansion: "40M+ users addressable", storyPoints: 21, impact: "Spanish-speaking market access enabled", achievements: ["2 Mobile Screens", "Multi-language Support"] },
                    platformStability: { title: "Platform Stability & Performance", efficiencyGain: "60% reduction in user issues", storyPoints: 25, impact: "Improved system reliability", achievements: ["8 Critical Bugs Fixed", "Performance Optimized"] },
                    innovation: { title: "Advanced Visualization", competitiveAdvantage: "First-to-market 3D visualization", storyPoints: 2, impact: "Enhanced diagnostic capabilities", achievements: ["3D Model Integration", "Interactive Visualization"] }
                },
                teamPerformance: {
                    'William Larsen': { points: 12, items: 6, themes: ['API Development', 'Frontend'] },
                    'Brad Foley': { points: 10, items: 5, themes: ['Backend', 'Infrastructure'] },
                    'Josh Rogers': { points: 8, items: 4, themes: ['DevOps', 'Optimization'] },
                    'Samantha Sutton': { points: 6, items: 4, themes: ['QA', 'Testing'] },
                    'Apurva Kalvade': { points: 5, items: 3, themes: ['API', 'Multilingual'] },
                    'Jenish Dabhi': { points: 4, items: 3, themes: ['Frontend', 'Multilingual'] },
                    'Vaishnavi Chitara': { points: 4, items: 3, themes: ['Backend', 'Multilingual'] },
                    'Karan Mehta': { points: 6, items: 3, themes: ['Mobile', 'App Development'] }
                },
                chartData: {
                    statusDistribution: [19, 15, 6, 7, 4, 2, 2],
                    storyPointsByStatus: [38, 18, 24, 12, 8, 3],
                    epicProgress: [35, 21, 25, 2, 8, 4, 3],
                    epicCompletionRates: [40, 60, 50, 100, 30, 25, 20],
                    forecastData: [38, 43, 49, 54, 76]
                },
                insights: {
                    criticalBlockers: "2 blocked items affecting core diagnosis functionality",
                    velocityGap: "2.7 pts/day vs 7.0 target (need 61% increase)",
                    successProbability: "85% chance of completing 70+ story points",
                    valueTracking: "Add time/cost savings metrics for ROI measurement"
                },
                carryOver: {
                    count: 7,
                    items: [
                        { issueKey: 'MV30-2213', summary: 'Swagger for API', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-700', summary: 'Case: Functionality: Add "Are you sure?" Modal', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-1914', summary: 'Case: ALL: Next Steps: Update Next Steps pages', status: 'Quality Assurance (IN TEST)', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2215', summary: 'App Log in page', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2204', summary: 'Handle multilingual images and icons', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2203', summary: 'Convert static text to multilingual', status: 'In Progress', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' },
                        { issueKey: 'MV30-2234', summary: 'Front-end Optimizations', status: 'Ready for Prod', fromSprint: '25Q309-S1', toSprint: '25Q309-S2' }
                    ]
                }
            }
        };
    </script>

    <!-- Main Dashboard Script -->
    <script src="js/dashboard.js" defer></script>
</body>
</html>
